(()=>{"use strict";const e=window.wp.element,t=window.React,l=t=>{let{className:l,overwriteEnable:a,toggleOverwriteEnable:n}=t;return(0,e.createElement)("div",{className:l},(0,e.createElement)("label",null,(0,e.createElement)("input",{type:"checkbox",checked:a,onChange:n}),(0,e.createElement)("span",null,"個別設定を有効にする")))},a=t=>{let{className:l,title:a}=t;return(0,e.createElement)("div",{className:l},(0,e.createElement)("dl",null,(0,e.createElement)("dt",null,"イベントタイトル"),(0,e.createElement)("dd",null,a)))},n=t=>{let{className:l,timetable:a,buttonText:n}=t;return null==a?(0,e.createElement)("div",{className:l},(0,e.createElement)("p",{className:"qms4__event-overwrite__timetable-empty"},"タイムテーブル未登録")):(0,e.createElement)("div",{className:l},(0,e.createElement)("table",null,(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",null,"開催",(0,e.createElement)("br",{className:"sp"}),"時間"),(0,e.createElement)("th",null,"空席",(0,e.createElement)("br",{className:"sp"}),"状況"),(0,e.createElement)("th",null," "),(0,e.createElement)("th",null," "))),(0,e.createElement)("tbody",null,a.map(((t,l)=>(0,e.createElement)("tr",{key:l},(0,e.createElement)("td",null,t.label),(0,e.createElement)("td",{className:"qms4__event-overwrite__parent-timetable__field-capacity"},t.capacity),(0,e.createElement)("td",null,(0,e.createElement)("p",{className:"qms4__event-overwrite__parent-timetable__comment"},t.comment),(0,e.createElement)("div",{className:"qms4__event-overwrite__parent-timetable__button"},n)),(0,e.createElement)("td",{className:"qms4__event-overwrite__parent-timetable__field-remove"}," ")))))))},r=window.wp.components,m=t=>{let{className:l,parentTitle:a,title:n,setTitle:m}=t;return(0,e.createElement)("div",{className:l},(0,e.createElement)("dl",null,(0,e.createElement)("dt",null,"イベントタイトル"),(0,e.createElement)("dd",null,(0,e.createElement)(r.TextControl,{value:n,onChange:m,placeholder:a}))))},c=window.wp.blockEditor,i=t=>{let{className:l,timetable:a,buttonText:n,setTimetable:m,setButtonText:i}=t;const s=e=>t=>{null!=a&&m(a.map(((l,a)=>e==a?{...l,label:t}:l)))},_=e=>t=>{null!=a&&m(a.map(((l,a)=>e==a?{...l,capacity:t}:l)))},o=e=>t=>{null!=a&&m(a.map(((l,a)=>e==a?{...l,comment:t}:l)))},v=e=>t=>{t.preventDefault(),null!=a&&m(a.filter(((t,l)=>e!==l)))},E=[{value:"○",label:"○"},{value:"△",label:"△"},{value:"×",label:"×"}];return null==a?(0,e.createElement)("div",{className:l},(0,e.createElement)("p",{className:"qms4__event-overwrite__timetable-empty"},"タイムテーブル未登録")):(0,e.createElement)("div",{className:l},(0,e.createElement)("table",null,(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,(0,e.createElement)("th",null,"開催",(0,e.createElement)("br",{className:"sp"}),"時間"),(0,e.createElement)("th",null,"空席",(0,e.createElement)("br",{className:"sp"}),"状況"),(0,e.createElement)("th",null," "),(0,e.createElement)("th",null,"削除"))),(0,e.createElement)("tbody",null,a.map(((t,l)=>(0,e.createElement)("tr",{key:l},(0,e.createElement)(c.RichText,{tagName:"td",value:t.label,onChange:s(l),placeholder:"開催時間を入力"}),(0,e.createElement)("td",{className:"qms4__event-overwrite__overwrite-timetable__field-capacity"},(0,e.createElement)(r.SelectControl,{value:t.capacity,options:E,onChange:_(l)})),(0,e.createElement)("td",null,(0,e.createElement)(c.RichText,{tagName:"p",className:"qms4__event-overwrite__overwrite-timetable__comment",value:t.comment,placeholder:"備考を入力",onChange:o(l)}),(0,e.createElement)(c.RichText,{tagName:"div",className:"qms4__event-overwrite__overwrite-timetable__button",value:n,placeholder:"この時間で予約する",onChange:i})),(0,e.createElement)("td",{className:"qms4__event-overwrite__overwrite-timetable__field-remove"},(0,e.createElement)("button",{title:"行を削除",onClick:v(l)},"× 削除"))))))),(0,e.createElement)("button",{className:"qms4__event-overwrite__overwrite-timetable__button-add-row",title:"行を追加",onClick:e=>{e.preventDefault(),m(null==a?[{label:"",capacity:"○",available:!0,comment:""}]:[...a,{label:"",capacity:"○",available:!0,comment:""}])}},"+ 行を追加"))};(0,e.render)((0,e.createElement)((()=>{const[r,c]=function(e){const[l,a]=(0,t.useState)(e),n=(0,t.useCallback)((e=>{a({...l,...e})}),[l]);return[l,n]}(window.QMS4__META_BOX__EVENT_OVERWRITE);return(0,e.createElement)("div",{className:"qms4__event-overwrite"},(0,e.createElement)(l,{className:"qms4__event-overwrite__overwrite-enable",overwriteEnable:r.overwriteEnable,toggleOverwriteEnable:()=>{c({overwriteEnable:!r.overwriteEnable,timetable:r.overwriteEnable||null!=r.timetable?r.timetable:[{label:"",capacity:"○",available:!0,comment:""}]})}}),(0,e.createElement)("div",{className:"qms4__event-overwrite__main"},(0,e.createElement)("div",{className:"qms4__event-overwrite__parent "+(r.overwriteEnable?"":"qms4__event-overwrite__parent--active")},(0,e.createElement)("h3",null,"マスター設定"),(0,e.createElement)(a,{className:"qms4__event-overwrite__parent-title",title:r.parentTitle}),(0,e.createElement)(n,{className:"qms4__event-overwrite__parent-timetable",timetable:r.parentTimetable,buttonText:r.parentButtonText})),(0,e.createElement)("div",{className:"qms4__event-overwrite__button-clone"},(0,e.createElement)("button",{onClick:e=>{e.preventDefault(),c({overwriteEnable:!0,timetable:r.parentTimetable&&[...r.parentTimetable]})}},"マスター設定を複製")),(0,e.createElement)("div",{className:"qms4__event-overwrite__overwrite "+(r.overwriteEnable?"qms4__event-overwrite__overwrite--active":"")},(0,e.createElement)("h3",null,"個別設定"),(0,e.createElement)(m,{className:"qms4__event-overwrite__overwrite-title",parentTitle:r.parentTitle,title:r.title,setTitle:e=>c({title:e})}),(0,e.createElement)(i,{className:"qms4__event-overwrite__overwrite-timetable",timetable:r.timetable,buttonText:r.buttonText,setTimetable:e=>c({timetable:e}),setButtonText:e=>c({buttonText:e})}))),(0,e.createElement)("div",{className:"qms4__event-overwrite__other-schedules"},(0,e.createElement)("h3",null,"この設定を他の日程にも反映させる")),(0,e.createElement)("input",{type:"hidden",name:"qms4__event__event-overwrite",value:JSON.stringify({overwriteEnable:r.overwriteEnable,title:r.title,timetable:r.timetable,buttonText:r.buttonText})}))}),null),document.getElementById("qms4__event-overwrite__container"))})();